rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test in ozone-mr
rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/*': No such file or directory
Executing test in hadoop27
Removing network hadoop27_default
Network hadoop27_default not found.
Creating network "hadoop27_default" with the default driver
Pulling datanode (apache/ozone-runner:20220623-1)...
20220623-1: Pulling from apache/ozone-runner
Digest: sha256:ba2ed07322bc8f888150fa2a1ec0523fca85e09c8eb9779445f8bca0d58cff97
Status: Downloaded newer image for apache/ozone-runner:20220623-1
Pulling rm (flokkr/hadoop:2.7.3)...
2.7.3: Pulling from flokkr/hadoop
Digest: sha256:e791dc9bfa858e24443e1f1d70bfacf8382e0b8b9c4063fee38a460c26967b8e
Status: Downloaded newer image for flokkr/hadoop:2.7.3
Creating hadoop27_rm_1 ... 
Creating hadoop27_nm_1 ... 
Creating hadoop27_datanode_1 ... 
Creating hadoop27_datanode_2 ... 
Creating hadoop27_datanode_3 ... 
Creating hadoop27_om_1       ... 
Creating hadoop27_scm_1      ... 
Creating hadoop27_s3g_1      ... 
Creating hadoop27_nm_1       ... done
Creating hadoop27_rm_1       ... done
Creating hadoop27_om_1       ... done
Creating hadoop27_datanode_3 ... done
Creating hadoop27_s3g_1      ... done
Creating hadoop27_scm_1      ... done
Creating hadoop27_datanode_1 ... done
Creating hadoop27_datanode_2 ... done
SECONDS: 39
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.18.0.4 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.4:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.18.0.4 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.4:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.18.0.4 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.4:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:123d5b4c-a47b-4967-8915-774c980cd373 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.4:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:123d5b4c-a47b-4967-8915-774c980cd373 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.18.0.4:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 49
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm.xml
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-1.xml
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-2.xml
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-3.xml
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-4.xml
Stopping hadoop27_s3g_1      ... 
Stopping hadoop27_datanode_3 ... 
Stopping hadoop27_datanode_1 ... 
Stopping hadoop27_om_1       ... 
Stopping hadoop27_scm_1      ... 
Stopping hadoop27_datanode_2 ... 
Stopping hadoop27_nm_1       ... 
Stopping hadoop27_rm_1       ... 
Stopping hadoop27_rm_1       ... done
Stopping hadoop27_nm_1       ... done
Stopping hadoop27_s3g_1      ... done
Stopping hadoop27_om_1       ... done
Stopping hadoop27_datanode_3 ... done
Stopping hadoop27_datanode_2 ... done
Stopping hadoop27_scm_1      ... done
Stopping hadoop27_datanode_1 ... done
Removing hadoop27_s3g_1      ... 
Removing hadoop27_datanode_3 ... 
Removing hadoop27_datanode_1 ... 
Removing hadoop27_om_1       ... 
Removing hadoop27_scm_1      ... 
Removing hadoop27_datanode_2 ... 
Removing hadoop27_nm_1       ... 
Removing hadoop27_rm_1       ... 
Removing hadoop27_s3g_1      ... done
Removing hadoop27_om_1       ... done
Removing hadoop27_datanode_2 ... done
Removing hadoop27_rm_1       ... done
Removing hadoop27_datanode_3 ... done
Removing hadoop27_datanode_1 ... done
Removing hadoop27_scm_1      ... done
Removing hadoop27_nm_1       ... done
Removing network hadoop27_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop27/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop27/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27.xml
removed 'hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-1.xml'
removed 'hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-2.xml'
removed 'hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-3.xml'
removed 'hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm-4.xml'
removed 'hadoop27/result/robot-hadoop27-hadoop27-createmrenv-scm.xml'
removed 'hadoop27/result/log.html'
removed 'hadoop27/result/report.html'
renamed 'hadoop27/result/dn-audit-23160b066a14.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27/dn-audit-23160b066a14.log'
renamed 'hadoop27/result/dn-audit-5469417c9cb5.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27/dn-audit-5469417c9cb5.log'
renamed 'hadoop27/result/dn-audit-72502c8e56f8.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27/dn-audit-72502c8e56f8.log'
renamed 'hadoop27/result/docker-hadoop27-hadoop27-createmrenv-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27/docker-hadoop27-hadoop27-createmrenv-scm.log'
renamed 'hadoop27/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27/om-audit-om.log'
renamed 'hadoop27/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27/s3g-audit-s3g.log'
renamed 'hadoop27/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop27/scm-audit-scm.log'
Executing test in hadoop31
Removing network hadoop31_default
Network hadoop31_default not found.
Creating network "hadoop31_default" with the default driver
Pulling rm (flokkr/hadoop:3.1.2)...
3.1.2: Pulling from flokkr/hadoop
Digest: sha256:1a24784735a3f243d7c0b2d1f49e74c42bb2ae8d7fc0f24aca2c740875f379f5
Status: Downloaded newer image for flokkr/hadoop:3.1.2
Creating hadoop31_scm_1 ... 
Creating hadoop31_om_1  ... 
Creating hadoop31_s3g_1 ... 
Creating hadoop31_datanode_1 ... 
Creating hadoop31_datanode_2 ... 
Creating hadoop31_datanode_3 ... 
Creating hadoop31_nm_1       ... 
Creating hadoop31_rm_1       ... 
Creating hadoop31_om_1       ... done
Creating hadoop31_s3g_1      ... done
Creating hadoop31_nm_1       ... done
Creating hadoop31_datanode_2 ... done
Creating hadoop31_datanode_1 ... done
Creating hadoop31_scm_1      ... done
Creating hadoop31_datanode_3 ... done
Creating hadoop31_rm_1       ... done
SECONDS: 40
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.19.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.5:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.19.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.5:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.19.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.5:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:aeeecbda-be31-4c04-93d9-20efdf02fd89 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.5:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:aeeecbda-be31-4c04-93d9-20efdf02fd89 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.5:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:aeeecbda-be31-4c04-93d9-20efdf02fd89 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.19.0.5:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=2) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 50
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 55
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm.xml
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-1.xml
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-2.xml
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-3.xml
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-4.xml
Stopping hadoop31_rm_1       ... 
Stopping hadoop31_nm_1       ... 
Stopping hadoop31_datanode_3 ... 
Stopping hadoop31_datanode_1 ... 
Stopping hadoop31_scm_1      ... 
Stopping hadoop31_datanode_2 ... 
Stopping hadoop31_s3g_1      ... 
Stopping hadoop31_om_1       ... 
Stopping hadoop31_nm_1       ... done
Stopping hadoop31_rm_1       ... done
Stopping hadoop31_s3g_1      ... done
Stopping hadoop31_om_1       ... done
Stopping hadoop31_datanode_1 ... done
Stopping hadoop31_datanode_3 ... done
Stopping hadoop31_datanode_2 ... done
Stopping hadoop31_scm_1      ... done
Removing hadoop31_rm_1       ... 
Removing hadoop31_nm_1       ... 
Removing hadoop31_datanode_3 ... 
Removing hadoop31_datanode_1 ... 
Removing hadoop31_scm_1      ... 
Removing hadoop31_datanode_2 ... 
Removing hadoop31_s3g_1      ... 
Removing hadoop31_om_1       ... 
Removing hadoop31_s3g_1      ... done
Removing hadoop31_rm_1       ... done
Removing hadoop31_om_1       ... done
Removing hadoop31_nm_1       ... done
Removing hadoop31_scm_1      ... done
Removing hadoop31_datanode_1 ... done
Removing hadoop31_datanode_2 ... done
Removing hadoop31_datanode_3 ... done
Removing network hadoop31_default
error while removing network: network hadoop31_default id 4f433bf81c7d6bce9b730cfdb20de673fdfba0fe8218db3db6175cdb78f86e7c has active endpoints
ERROR: Test execution of hadoop31 is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31.xml
removed 'hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-1.xml'
removed 'hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-2.xml'
removed 'hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-3.xml'
removed 'hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm-4.xml'
removed 'hadoop31/result/robot-hadoop31-hadoop31-createmrenv-scm.xml'
renamed 'hadoop31/result/dn-audit-12dc00d1b0cb.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31/dn-audit-12dc00d1b0cb.log'
renamed 'hadoop31/result/dn-audit-19ea3519bff6.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31/dn-audit-19ea3519bff6.log'
renamed 'hadoop31/result/dn-audit-e5d5eba01693.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31/dn-audit-e5d5eba01693.log'
renamed 'hadoop31/result/docker-hadoop31-hadoop31-createmrenv-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31/docker-hadoop31-hadoop31-createmrenv-scm.log'
renamed 'hadoop31/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31/om-audit-om.log'
renamed 'hadoop31/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31/s3g-audit-s3g.log'
renamed 'hadoop31/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop31/scm-audit-scm.log'
Executing test in hadoop32
Removing network hadoop32_default
Network hadoop32_default not found.
Creating network "hadoop32_default" with the default driver
Pulling rm (flokkr/hadoop:3.2.2)...
3.2.2: Pulling from flokkr/hadoop
Digest: sha256:958a6c5a3af4a01b3347ccc57052df78033e401fd9dff965148b0939782e2c9e
Status: Downloaded newer image for flokkr/hadoop:3.2.2
Creating hadoop32_s3g_1 ... 
Creating hadoop32_datanode_1 ... 
Creating hadoop32_datanode_2 ... 
Creating hadoop32_datanode_3 ... 
Creating hadoop32_nm_1       ... 
Creating hadoop32_om_1       ... 
Creating hadoop32_scm_1      ... 
Creating hadoop32_rm_1       ... 
Creating hadoop32_nm_1       ... done
Creating hadoop32_s3g_1      ... done
Creating hadoop32_datanode_3 ... done
Creating hadoop32_datanode_1 ... done
Creating hadoop32_rm_1       ... done
Creating hadoop32_datanode_2 ... done
Creating hadoop32_scm_1      ... done
Creating hadoop32_om_1       ... done
SECONDS: 46
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.20.0.6 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.6:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.20.0.6 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.6:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.20.0.6 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.6:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:34e7c856-c7c5-4e0d-9d7b-22392ec60e5a is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.6:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:34e7c856-c7c5-4e0d-9d7b-22392ec60e5a is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.6:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:34e7c856-c7c5-4e0d-9d7b-22392ec60e5a is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.20.0.6:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 59
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 65
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm.xml
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-1.xml
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-2.xml
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-3.xml
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-4.xml
Stopping hadoop32_rm_1       ... 
Stopping hadoop32_om_1       ... 
Stopping hadoop32_scm_1      ... 
Stopping hadoop32_datanode_1 ... 
Stopping hadoop32_nm_1       ... 
Stopping hadoop32_datanode_3 ... 
Stopping hadoop32_datanode_2 ... 
Stopping hadoop32_s3g_1      ... 
Stopping hadoop32_nm_1       ... done
Stopping hadoop32_rm_1       ... done
Stopping hadoop32_s3g_1      ... done
Stopping hadoop32_om_1       ... done
Stopping hadoop32_datanode_3 ... done
Stopping hadoop32_datanode_2 ... done
Stopping hadoop32_datanode_1 ... done
Stopping hadoop32_scm_1      ... done
Removing hadoop32_rm_1       ... 
Removing hadoop32_om_1       ... 
Removing hadoop32_scm_1      ... 
Removing hadoop32_datanode_1 ... 
Removing hadoop32_nm_1       ... 
Removing hadoop32_datanode_3 ... 
Removing hadoop32_datanode_2 ... 
Removing hadoop32_s3g_1      ... 
Removing hadoop32_s3g_1      ... done
Removing hadoop32_datanode_3 ... done
Removing hadoop32_scm_1      ... done
Removing hadoop32_datanode_1 ... done
Removing hadoop32_om_1       ... done
Removing hadoop32_rm_1       ... done
Removing hadoop32_datanode_2 ... done
Removing hadoop32_nm_1       ... done
Removing network hadoop32_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop32/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop32/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32.xml
removed 'hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-1.xml'
removed 'hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-2.xml'
removed 'hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-3.xml'
removed 'hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm-4.xml'
removed 'hadoop32/result/robot-hadoop32-hadoop32-createmrenv-scm.xml'
removed 'hadoop32/result/log.html'
removed 'hadoop32/result/report.html'
renamed 'hadoop32/result/dn-audit-0ae4f47c7108.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32/dn-audit-0ae4f47c7108.log'
renamed 'hadoop32/result/dn-audit-f2702d8640c4.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32/dn-audit-f2702d8640c4.log'
renamed 'hadoop32/result/dn-audit-fd11ae645037.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32/dn-audit-fd11ae645037.log'
renamed 'hadoop32/result/docker-hadoop32-hadoop32-createmrenv-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32/docker-hadoop32-hadoop32-createmrenv-scm.log'
renamed 'hadoop32/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32/om-audit-om.log'
renamed 'hadoop32/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32/s3g-audit-s3g.log'
renamed 'hadoop32/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop32/scm-audit-scm.log'
Executing test in hadoop33
Removing network hadoop33_default
Network hadoop33_default not found.
Creating network "hadoop33_default" with the default driver
Pulling rm (flokkr/hadoop:3.3.1)...
3.3.1: Pulling from flokkr/hadoop
Digest: sha256:2dd21ee3789687f6c297b43d618a0ff2b7ffd9e8a97a77b08643603ab8c3556d
Status: Downloaded newer image for flokkr/hadoop:3.3.1
Creating hadoop33_scm_1 ... 
Creating hadoop33_rm_1  ... 
Creating hadoop33_datanode_1 ... 
Creating hadoop33_datanode_2 ... 
Creating hadoop33_datanode_3 ... 
Creating hadoop33_nm_1       ... 
Creating hadoop33_s3g_1      ... 
Creating hadoop33_om_1       ... 
Creating hadoop33_nm_1       ... done
Creating hadoop33_scm_1      ... done
Creating hadoop33_rm_1       ... done
Creating hadoop33_datanode_3 ... done
Creating hadoop33_s3g_1      ... done
Creating hadoop33_datanode_2 ... done
Creating hadoop33_datanode_1 ... done
Creating hadoop33_om_1       ... done
SECONDS: 46
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.21.0.2 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.2:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.21.0.2 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.2:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.21.0.2 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.2:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:f67e0b45-34e0-4221-abdb-4bb8d859aeaf is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.2:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:f67e0b45-34e0-4221-abdb-4bb8d859aeaf is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.21.0.2:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 58
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm.xml
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-1.xml
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-2.xml
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-3.xml
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-4.xml
Stopping hadoop33_s3g_1      ... 
Stopping hadoop33_datanode_2 ... 
Stopping hadoop33_om_1       ... 
Stopping hadoop33_datanode_3 ... 
Stopping hadoop33_datanode_1 ... 
Stopping hadoop33_nm_1       ... 
Stopping hadoop33_rm_1       ... 
Stopping hadoop33_scm_1      ... 
Stopping hadoop33_nm_1       ... done
Stopping hadoop33_rm_1       ... done
Stopping hadoop33_s3g_1      ... done
Stopping hadoop33_om_1       ... done
Stopping hadoop33_datanode_1 ... done
Stopping hadoop33_datanode_3 ... done
Stopping hadoop33_datanode_2 ... done
Stopping hadoop33_scm_1      ... done
Removing hadoop33_s3g_1      ... 
Removing hadoop33_datanode_2 ... 
Removing hadoop33_om_1       ... 
Removing hadoop33_datanode_3 ... 
Removing hadoop33_datanode_1 ... 
Removing hadoop33_nm_1       ... 
Removing hadoop33_rm_1       ... 
Removing hadoop33_scm_1      ... 
Removing hadoop33_om_1       ... done
Removing hadoop33_s3g_1      ... done
Removing hadoop33_datanode_1 ... done
Removing hadoop33_nm_1       ... done
Removing hadoop33_scm_1      ... done
Removing hadoop33_rm_1       ... done
Removing hadoop33_datanode_3 ... done
Removing hadoop33_datanode_2 ... done
Removing network hadoop33_default
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop33/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/hadoop33/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33.xml
removed 'hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-1.xml'
removed 'hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-2.xml'
removed 'hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-3.xml'
removed 'hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm-4.xml'
removed 'hadoop33/result/robot-hadoop33-hadoop33-createmrenv-scm.xml'
removed 'hadoop33/result/log.html'
removed 'hadoop33/result/report.html'
renamed 'hadoop33/result/dn-audit-4365e04a26a2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33/dn-audit-4365e04a26a2.log'
renamed 'hadoop33/result/dn-audit-a380acb820c2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33/dn-audit-a380acb820c2.log'
renamed 'hadoop33/result/dn-audit-aa6b62827a10.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33/dn-audit-aa6b62827a10.log'
renamed 'hadoop33/result/docker-hadoop33-hadoop33-createmrenv-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33/docker-hadoop33-hadoop33-createmrenv-scm.log'
renamed 'hadoop33/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33/om-audit-om.log'
renamed 'hadoop33/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33/s3g-audit-s3g.log'
renamed 'hadoop33/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/hadoop33/scm-audit-scm.log'
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-mr/result/report.html
ERROR: Test execution of ozone-mr is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-mr.xml
removed 'ozone-mr/result/hadoop27.xml'
removed 'ozone-mr/result/hadoop31.xml'
removed 'ozone-mr/result/hadoop32.xml'
removed 'ozone-mr/result/hadoop33.xml'
removed 'ozone-mr/result/log.html'
removed 'ozone-mr/result/report.html'
renamed 'ozone-mr/result/hadoop27' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-mr/hadoop27'
renamed 'ozone-mr/result/hadoop31' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-mr/hadoop31'
renamed 'ozone-mr/result/hadoop32' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-mr/hadoop32'
renamed 'ozone-mr/result/hadoop33' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-mr/hadoop33'
Executing test in ozonesecure-mr
Removing network ozone
Network ozone not found.
Creating network "ozone" with the default driver
Pulling kdc (apache/ozone-testkrb5:20210419-1)...
20210419-1: Pulling from apache/ozone-testkrb5
Digest: sha256:ba7a04b9f7605b9ac64f34400f426f1e9938ad2b5be93365685097ba962ed19a
Status: Downloaded newer image for apache/ozone-testkrb5:20210419-1
Creating ozonesecure-mr_kms_1 ... 
Creating jhs                  ... 
Creating ozonesecure-mr_kdc_1 ... 
Creating ozonesecure-mr_scm_1 ... 
Creating ozonesecure-mr_om_1  ... 
Creating ozonesecure-mr_nm_1  ... 
Creating ozonesecure-mr_datanode_1 ... 
Creating ozonesecure-mr_datanode_2 ... 
Creating ozonesecure-mr_datanode_3 ... 
Creating ozonesecure-mr_rm_1       ... 
Creating ozonesecure-mr_s3g_1      ... 
Creating ozonesecure-mr_kdc_1      ... done
Creating jhs                       ... done
Creating ozonesecure-mr_kms_1      ... done
Creating ozonesecure-mr_nm_1       ... done
Creating ozonesecure-mr_datanode_3 ... done
Creating ozonesecure-mr_scm_1      ... done
Creating ozonesecure-mr_datanode_2 ... done
Creating ozonesecure-mr_rm_1       ... done
Creating ozonesecure-mr_om_1       ... done
Creating ozonesecure-mr_s3g_1      ... done
Creating ozonesecure-mr_datanode_1 ... done
ozone.scm.client.address should be set in ozone-site.xml or with the --scm option
SECONDS: 3

SECONDS: 72
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm/172.22.0.5 to scm:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 8 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:9cd3bac2-64b1-407a-8c89-e7dc98aa1066 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 9 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:9cd3bac2-64b1-407a-8c89-e7dc98aa1066 is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scmNodeId,nodeAddress=scm/172.22.0.5:9860 after 10 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 96
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 109
SCM is out of safe mode.
Safe mode is off
No OM HA service, no need to wait
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om.xml
==============================================================================
Createmrenv :: Create directories required for MR test                        
==============================================================================
Create test volume, bucket and key                                    | PASS |
------------------------------------------------------------------------------
Create user dir for hadoop                                            | PASS |
------------------------------------------------------------------------------
Createmrenv :: Create directories required for MR test                | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-1.xml
==============================================================================
Kinit-Hadoop :: Kinit test user                                               
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit-Hadoop :: Kinit test user                                       | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-2.xml
==============================================================================
hadoopfs-o3fs :: Test ozone fs with hadoopfs                                  
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-o3fs :: Test ozone fs with hadoopfs                          | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-3.xml
==============================================================================
mapreduce-o3fs :: Execute MR jobs                                             
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-o3fs :: Execute MR jobs                                     | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-4.xml
==============================================================================
hadoopfs-ofs :: Test ozone fs with hadoopfs                                   
==============================================================================
Test hadoop dfs                                                       | PASS |
------------------------------------------------------------------------------
hadoopfs-ofs :: Test ozone fs with hadoopfs                           | PASS |
1 critical test, 1 passed, 0 failed
1 test total, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-5.xml
==============================================================================
mapreduce-ofs :: Execute MR jobs                                              
==============================================================================
Execute PI calculation                                                | PASS |
------------------------------------------------------------------------------
Execute WordCount                                                     | PASS |
------------------------------------------------------------------------------
mapreduce-ofs :: Execute MR jobs                                      | PASS |
2 critical tests, 2 passed, 0 failed
2 tests total, 2 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-6.xml
Stopping ozonesecure-mr_s3g_1      ... 
Stopping ozonesecure-mr_rm_1       ... 
Stopping ozonesecure-mr_datanode_1 ... 
Stopping ozonesecure-mr_datanode_2 ... 
Stopping ozonesecure-mr_datanode_3 ... 
Stopping ozonesecure-mr_nm_1       ... 
Stopping ozonesecure-mr_om_1       ... 
Stopping ozonesecure-mr_scm_1      ... 
Stopping ozonesecure-mr_kdc_1      ... 
Stopping jhs                       ... 
Stopping ozonesecure-mr_kms_1      ... 
Stopping ozonesecure-mr_kdc_1      ... done
Stopping ozonesecure-mr_rm_1       ... done
Stopping ozonesecure-mr_nm_1       ... done
Stopping ozonesecure-mr_kms_1      ... done
Stopping jhs                       ... done
Stopping ozonesecure-mr_s3g_1      ... done
Stopping ozonesecure-mr_om_1       ... done
Stopping ozonesecure-mr_datanode_2 ... done
Stopping ozonesecure-mr_datanode_1 ... done
Stopping ozonesecure-mr_datanode_3 ... done
Stopping ozonesecure-mr_scm_1      ... done
Removing ozonesecure-mr_s3g_1      ... 
Removing ozonesecure-mr_rm_1       ... 
Removing ozonesecure-mr_datanode_1 ... 
Removing ozonesecure-mr_datanode_2 ... 
Removing ozonesecure-mr_datanode_3 ... 
Removing ozonesecure-mr_nm_1       ... 
Removing ozonesecure-mr_om_1       ... 
Removing ozonesecure-mr_scm_1      ... 
Removing ozonesecure-mr_kdc_1      ... 
Removing jhs                       ... 
Removing ozonesecure-mr_kms_1      ... 
Removing ozonesecure-mr_s3g_1      ... done
Removing ozonesecure-mr_rm_1       ... done
Removing jhs                       ... done
Removing ozonesecure-mr_om_1       ... done
Removing ozonesecure-mr_kms_1      ... done
Removing ozonesecure-mr_kdc_1      ... done
Removing ozonesecure-mr_nm_1       ... done
Removing ozonesecure-mr_scm_1      ... done
Removing ozonesecure-mr_datanode_2 ... done
Removing ozonesecure-mr_datanode_1 ... done
Removing ozonesecure-mr_datanode_3 ... done
Removing network ozone
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozonesecure-mr/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozonesecure-mr/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr.xml
removed 'ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-1.xml'
removed 'ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-2.xml'
removed 'ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-3.xml'
removed 'ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-4.xml'
removed 'ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-5.xml'
removed 'ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om-6.xml'
removed 'ozonesecure-mr/result/robot-ozonesecure-mr-ozonesecure-mr-kinit-om.xml'
removed 'ozonesecure-mr/result/log.html'
removed 'ozonesecure-mr/result/report.html'
renamed 'ozonesecure-mr/result/dn-audit-2f943706689b.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr/dn-audit-2f943706689b.log'
renamed 'ozonesecure-mr/result/dn-audit-62de0256a767.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr/dn-audit-62de0256a767.log'
renamed 'ozonesecure-mr/result/dn-audit-fabea67b0860.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr/dn-audit-fabea67b0860.log'
renamed 'ozonesecure-mr/result/docker-ozonesecure-mr-ozonesecure-mr-kinit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr/docker-ozonesecure-mr-ozonesecure-mr-kinit-om.log'
renamed 'ozonesecure-mr/result/om-audit-om.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr/om-audit-om.log'
renamed 'ozonesecure-mr/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr/s3g-audit-s3g.log'
renamed 'ozonesecure-mr/result/scm-audit-scm.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-mr/scm-audit-scm.log'
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/report.html
