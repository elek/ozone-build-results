rm: cannot remove '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/*': No such file or directory
Executing test in ozone-ha
Removing network ozone-ha_default
Network ozone-ha_default not found.
Creating network "ozone-ha_default" with the default driver
Pulling datanode (apache/ozone-runner:20220623-1)...
20220623-1: Pulling from apache/ozone-runner
Digest: sha256:ba2ed07322bc8f888150fa2a1ec0523fca85e09c8eb9779445f8bca0d58cff97
Status: Downloaded newer image for apache/ozone-runner:20220623-1
Creating ozone-ha_recon_1 ... 
Creating ozone-ha_s3g_1   ... 
Creating ozone-ha_scm3_1  ... 
Creating ozone-ha_datanode_1 ... 
Creating ozone-ha_datanode_2 ... 
Creating ozone-ha_datanode_3 ... 
Creating ozone-ha_scm1_1     ... 
Creating ozone-ha_om2_1      ... 
Creating ozone-ha_scm2_1     ... 
Creating ozone-ha_om1_1      ... 
Creating ozone-ha_om3_1      ... 
Creating ozone-ha_scm3_1     ... done
Creating ozone-ha_recon_1    ... done
Creating ozone-ha_datanode_3 ... done
Creating ozone-ha_scm2_1     ... done
Creating ozone-ha_scm1_1     ... done
Creating ozone-ha_datanode_2 ... done
Creating ozone-ha_s3g_1      ... done
Creating ozone-ha_om3_1      ... done
Creating ozone-ha_om1_1      ... done
Creating ozone-ha_datanode_1 ... done
Creating ozone-ha_om2_1      ... done
SECONDS: 48
com.google.protobuf.ServiceException: java.net.ConnectException: Call From 37d6f42c1f9a/172.18.0.10 to scm2:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scm2,nodeAddress=scm2/172.18.0.9:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 37d6f42c1f9a/172.18.0.10 to scm3:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scm3,nodeAddress=scm3/172.18.0.4:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 37d6f42c1f9a/172.18.0.10 to scm1:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scm1,nodeAddress=scm1/172.18.0.10:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 37d6f42c1f9a/172.18.0.10 to scm2:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scm2,nodeAddress=scm2/172.18.0.9:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 37d6f42c1f9a/172.18.0.10 to scm3:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scm3,nodeAddress=scm3/172.18.0.4:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:eab00986-8d24-4d1d-b09b-2387e2b185fc is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy19.submitRequest over nodeId=scm1,nodeAddress=scm1/172.18.0.10:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 37d6f42c1f9a/172.18.0.10 to scm2:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scm2,nodeAddress=scm2/172.18.0.9:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From 37d6f42c1f9a/172.18.0.10 to scm3:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy19.submitRequest over nodeId=scm3,nodeAddress=scm3/172.18.0.4:9860 after 8 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 59
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 74
SCM is in safe mode. validated:true, DataNodeSafeModeRule, registered datanodes (=3) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 93
SCM is out of safe mode.
Safe mode is off
Found OM leader for service omservice: om1 : LEADER (om1)
==============================================================================
Ozone-Shell-Single :: Test ozone shell CLI usage                              
==============================================================================
Test ozone shell                                                      | PASS |
------------------------------------------------------------------------------
Ozone-Shell-Single :: Test ozone shell CLI usage                      | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-ha/result/robot-ozone-ha-ozone-ha-ozone-shell-single-scm1.xml
==============================================================================
Links :: Test bucket links via Ozone CLI                                      
==============================================================================
Link to non-existent bucket                                           | PASS |
------------------------------------------------------------------------------
Key create passthrough                                                | PASS |
------------------------------------------------------------------------------
Key read passthrough                                                  | PASS |
------------------------------------------------------------------------------
Key list passthrough                                                  | PASS |
------------------------------------------------------------------------------
Key delete passthrough                                                | PASS |
------------------------------------------------------------------------------
Bucket list contains links                                            | PASS |
------------------------------------------------------------------------------
Bucket info shows source                                              | PASS |
------------------------------------------------------------------------------
Source and target have separate ACLs                                  | PASS |
------------------------------------------------------------------------------
Buckets and links share namespace                                     | PASS |
------------------------------------------------------------------------------
Can follow link with read access                                      | PASS |
------------------------------------------------------------------------------
Cannot follow link without read access                                | PASS |
------------------------------------------------------------------------------
ACL verified on source bucket                                         | PASS |
------------------------------------------------------------------------------
Loop in link chain is detected                                        | PASS |
------------------------------------------------------------------------------
Multiple links to same bucket are allowed                             | PASS |
------------------------------------------------------------------------------
Source bucket not affected by deleting link                           | PASS |
------------------------------------------------------------------------------
Setting bucket property on link not allowed                           | PASS |
------------------------------------------------------------------------------
Links :: Test bucket links via Ozone CLI                              | PASS |
16 tests, 16 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozone-ha/result/robot-ozone-ha-ozone-ha-ozone-shell-single-scm1-1.xml
==============================================================================
S3                                                                            
==============================================================================
S3.Awss3 :: S3 gateway test with aws cli                                      
==============================================================================
File upload and directory list                                        | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
File upload with special chars                                        | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Awss3 :: S3 gateway test with aws cli                              | FAIL |
Parent suite setup failed:
1 != 0

2 tests, 0 passed, 2 failed
==============================================================================
S3.Boto3 :: S3 gateway test with Boto3 Client                                 
==============================================================================
Boto3 Client Test                                                     | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Boto3 :: S3 gateway test with Boto3 Client                         | FAIL |
Parent suite setup failed:
1 != 0

1 test, 0 passed, 1 failed
==============================================================================
S3.Bucketcreate :: S3 gateway test with aws cli                               
==============================================================================
Create new bucket                                                     | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Create bucket which already exists                                    | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Create bucket with invalid bucket name                                | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Create new bucket and check no group ACL                              | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Bucketcreate :: S3 gateway test with aws cli                       | FAIL |
Parent suite setup failed:
1 != 0

4 tests, 0 passed, 4 failed
==============================================================================
S3.Bucketdelete :: S3 gateway test with aws cli                               
==============================================================================
Delete existing bucket                                                | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Delete non-existent bucket                                            | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Bucketdelete :: S3 gateway test with aws cli                       | FAIL |
Parent suite setup failed:
1 != 0

2 tests, 0 passed, 2 failed
==============================================================================
S3.Buckethead :: S3 gateway test with aws cli                                 
==============================================================================
Head Bucket                                                           | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Head Bucket not existent                                              | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Buckethead :: S3 gateway test with aws cli                         | FAIL |
Parent suite setup failed:
1 != 0

2 tests, 0 passed, 2 failed
==============================================================================
S3.Bucketlist :: S3 gateway test with aws cli                                 
==============================================================================
List buckets                                                          | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get bucket info with Ozone Shell to check the owner field             | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
List buckets with empty access id                                     | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Bucketlist :: S3 gateway test with aws cli                         | FAIL |
Parent suite setup failed:
1 != 0

3 tests, 0 passed, 3 failed
==============================================================================
S3.MultipartUpload :: S3 gateway test with aws cli                            
==============================================================================
Test Multipart Upload With Adjusted Length                            | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload                                                 | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload Complete                                        | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload Complete Entity too small                       | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload Complete Invalid part errors and complete mp... | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test abort Multipart upload                                           | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test abort Multipart upload with invalid uploadId                     | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Upload part with Incorrect uploadID                                   | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test list parts                                                       | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload with the simplified aws s3 cp API               | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload Put With Copy                                   | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload Put With Copy and range                         | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload Put With Copy and range with IfModifiedSince    | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Test Multipart Upload list                                            | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.MultipartUpload :: S3 gateway test with aws cli                    | FAIL |
Parent suite setup failed:
1 != 0

14 tests, 0 passed, 14 failed
==============================================================================
S3.Objectcopy :: S3 gateway test with aws cli                                 
==============================================================================
Copy Object Happy Scenario                                            | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Copy Object Where Bucket is not available                             | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Copy Object Where both source and dest are same with change to sto... | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Copy Object Where Key not available                                   | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Objectcopy :: S3 gateway test with aws cli                         | FAIL |
Parent suite setup failed:
1 != 0

4 tests, 0 passed, 4 failed
==============================================================================
S3.Objectdelete :: S3 gateway test with aws cli                               
==============================================================================
Delete file with s3api                                                | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Delete file with s3api, file doesn't exist                            | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Delete dir with s3api                                                 | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Delete file with s3api, file doesn't exist, prefix of a real file     | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Delete file with s3api, bucket doesn't exist                          | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Objectdelete :: S3 gateway test with aws cli                       | FAIL |
Parent suite setup failed:
1 != 0

5 tests, 0 passed, 5 failed
==============================================================================
S3.Objecthead :: S3 gateway test with aws cli                                 
==============================================================================
Head existing object                                                  | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Head object in non existing bucket                                    | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Head non existing key                                                 | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Objecthead :: S3 gateway test with aws cli                         | FAIL |
Parent suite setup failed:
1 != 0

3 tests, 0 passed, 3 failed
==============================================================================
S3.Objectmultidelete :: S3 gateway test with aws cli                          
==============================================================================
Delete file with multi delete                                         | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Objectmultidelete :: S3 gateway test with aws cli                  | FAIL |
Parent suite setup failed:
1 != 0

1 test, 0 passed, 1 failed
==============================================================================
S3.Objectputget :: S3 gateway test with aws cli                               
==============================================================================
Put object to s3                                                      | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get object from s3                                                    | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset              | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset(start off... | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset(end offse... | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get Partial object from s3 with only start offset                     | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset which are... | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Get Partial object from s3 to get last n bytes                        | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Incorrect values for end and start offset                             | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
Zero byte file                                                        | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Objectputget :: S3 gateway test with aws cli                       | FAIL |
Parent suite setup failed:
1 != 0

10 tests, 0 passed, 10 failed
==============================================================================
S3.Webui :: S3 gateway web ui test                                            
==============================================================================
S3 Gateway Web UI                                                     | FAIL |
Parent suite setup failed:
1 != 0
------------------------------------------------------------------------------
S3.Webui :: S3 gateway web ui test                                    | FAIL |
Parent suite setup failed:
1 != 0

1 test, 0 passed, 1 failed
==============================================================================
S3                                                                    | FAIL |
Suite setup failed:
1 != 0

52 tests, 0 passed, 52 failed
==============================================================================
Output:  /tmp/smoketest/ozone-ha/result/robot-ozone-ha-ozone-ha-ozone-shell-single-scm1-2.xml
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_datanode_1_HddsDatanodeService.stack
jstack 9 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_datanode_2_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_datanode_3_HddsDatanodeService.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_om1_1_OzoneManagerStarter.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_om2_1_OzoneManagerStarter.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_om3_1_OzoneManagerStarter.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_recon_1_ReconServer.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_s3g_1_Gateway.stack
jstack 8 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_scm1_1_StorageContainerManagerStarter.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_scm2_1_StorageContainerManagerStarter.stack
jstack 7 > /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozone-ha/result/ozone-ha_scm3_1_StorageContainerManagerStarter.stack
Stopping ozone-ha_om3_1      ... 
Stopping ozone-ha_om1_1      ... 
Stopping ozone-ha_scm2_1     ... 
Stopping ozone-ha_om2_1      ... 
Stopping ozone-ha_datanode_2 ... 
Stopping ozone-ha_scm1_1     ... 
Stopping ozone-ha_datanode_1 ... 
Stopping ozone-ha_datanode_3 ... 
Stopping ozone-ha_scm3_1     ... 
Stopping ozone-ha_recon_1    ... 
Stopping ozone-ha_s3g_1      ... 
Stopping ozone-ha_s3g_1      ... done
Stopping ozone-ha_om2_1      ... done
Stopping ozone-ha_om3_1      ... done
Stopping ozone-ha_om1_1      ... done
Stopping ozone-ha_recon_1    ... done
Stopping ozone-ha_datanode_1 ... done
Stopping ozone-ha_scm1_1     ... done
Stopping ozone-ha_scm2_1     ... done
Stopping ozone-ha_scm3_1     ... done
Stopping ozone-ha_datanode_2 ... done
Stopping ozone-ha_datanode_3 ... done
Removing ozone-ha_om3_1      ... 
Removing ozone-ha_om1_1      ... 
Removing ozone-ha_scm2_1     ... 
Removing ozone-ha_om2_1      ... 
Removing ozone-ha_datanode_2 ... 
Removing ozone-ha_scm1_1     ... 
Removing ozone-ha_datanode_1 ... 
Removing ozone-ha_datanode_3 ... 
Removing ozone-ha_scm3_1     ... 
Removing ozone-ha_recon_1    ... 
Removing ozone-ha_s3g_1      ... 
Removing ozone-ha_scm2_1     ... done
Removing ozone-ha_datanode_1 ... done
Removing ozone-ha_scm1_1     ... done
Removing ozone-ha_s3g_1      ... done
Removing ozone-ha_datanode_3 ... done
Removing ozone-ha_om3_1      ... done
Removing ozone-ha_scm3_1     ... done
Removing ozone-ha_om1_1      ... done
Removing ozone-ha_om2_1      ... done
Removing ozone-ha_recon_1    ... done
Removing ozone-ha_datanode_2 ... done
Removing network ozone-ha_default
ERROR: Test execution of ozone-ha is FAILED!!!!
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha.xml
removed 'ozone-ha/result/robot-ozone-ha-ozone-ha-ozone-shell-single-scm1-1.xml'
removed 'ozone-ha/result/robot-ozone-ha-ozone-ha-ozone-shell-single-scm1-2.xml'
removed 'ozone-ha/result/robot-ozone-ha-ozone-ha-ozone-shell-single-scm1.xml'
renamed 'ozone-ha/result/dn-audit-876a52aa9ffb.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/dn-audit-876a52aa9ffb.log'
renamed 'ozone-ha/result/dn-audit-a8024c3bda66.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/dn-audit-a8024c3bda66.log'
renamed 'ozone-ha/result/dn-audit-c5e499a6088d.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/dn-audit-c5e499a6088d.log'
renamed 'ozone-ha/result/docker-ozone-ha-ozone-ha-ozone-shell-single-scm1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/docker-ozone-ha-ozone-ha-ozone-shell-single-scm1.log'
renamed 'ozone-ha/result/om-audit-om1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/om-audit-om1.log'
renamed 'ozone-ha/result/om-audit-om2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/om-audit-om2.log'
renamed 'ozone-ha/result/om-audit-om3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/om-audit-om3.log'
renamed 'ozone-ha/result/ozone-ha_datanode_1_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_datanode_1_HddsDatanodeService.stack'
renamed 'ozone-ha/result/ozone-ha_datanode_2_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_datanode_2_HddsDatanodeService.stack'
renamed 'ozone-ha/result/ozone-ha_datanode_3_HddsDatanodeService.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_datanode_3_HddsDatanodeService.stack'
renamed 'ozone-ha/result/ozone-ha_om1_1_OzoneManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_om1_1_OzoneManagerStarter.stack'
renamed 'ozone-ha/result/ozone-ha_om2_1_OzoneManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_om2_1_OzoneManagerStarter.stack'
renamed 'ozone-ha/result/ozone-ha_om3_1_OzoneManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_om3_1_OzoneManagerStarter.stack'
renamed 'ozone-ha/result/ozone-ha_recon_1_ReconServer.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_recon_1_ReconServer.stack'
renamed 'ozone-ha/result/ozone-ha_s3g_1_Gateway.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_s3g_1_Gateway.stack'
renamed 'ozone-ha/result/ozone-ha_scm1_1_StorageContainerManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_scm1_1_StorageContainerManagerStarter.stack'
renamed 'ozone-ha/result/ozone-ha_scm2_1_StorageContainerManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_scm2_1_StorageContainerManagerStarter.stack'
renamed 'ozone-ha/result/ozone-ha_scm3_1_StorageContainerManagerStarter.stack' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/ozone-ha_scm3_1_StorageContainerManagerStarter.stack'
renamed 'ozone-ha/result/s3g-audit-3ea1de1ad63e.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/s3g-audit-3ea1de1ad63e.log'
renamed 'ozone-ha/result/scm-audit-12b4e3ba410a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/scm-audit-12b4e3ba410a.log'
renamed 'ozone-ha/result/scm-audit-1b545ec3b04e.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/scm-audit-1b545ec3b04e.log'
renamed 'ozone-ha/result/scm-audit-37d6f42c1f9a.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozone-ha/scm-audit-37d6f42c1f9a.log'
Executing test in ozonesecure-ha
Removing network ozonesecure-ha_ozone_net
Network ozonesecure-ha_ozone_net not found.
Creating network "ozonesecure-ha_ozone_net" with the default driver
Pulling kdc (apache/ozone-testkrb5:20210419-1)...
20210419-1: Pulling from apache/ozone-testkrb5
Digest: sha256:ba7a04b9f7605b9ac64f34400f426f1e9938ad2b5be93365685097ba962ed19a
Status: Downloaded newer image for apache/ozone-testkrb5:20210419-1
Pulling kms (apache/hadoop:3)...
3: Pulling from apache/hadoop
Digest: sha256:793348d0839a55d27fb9466d4a5f7e058744866f5ab2cb7aa32f541b4810b215
Status: Downloaded newer image for apache/hadoop:3
Creating ozonesecure-ha_scm2.org_1 ... 
Creating ozonesecure-ha_om3_1      ... 
Creating ozonesecure-ha_kdc_1      ... 
Creating ozonesecure-ha_om2_1      ... 
Creating ozonesecure-ha_om1_1      ... 
Creating ozonesecure-ha_datanode3_1 ... 
Creating ozonesecure-ha_kms_1       ... 
Creating ozonesecure-ha_scm3.org_1  ... 
Creating ozonesecure-ha_datanode1_1 ... 
Creating ozonesecure-ha_datanode2_1 ... 
Creating ozonesecure-ha_scm1.org_1  ... 
Creating ozonesecure-ha_s3g_1       ... 
Creating ozonesecure-ha_recon_1     ... 
Creating ozonesecure-ha_kdc_1       ... done
Creating ozonesecure-ha_scm2.org_1  ... done
Creating ozonesecure-ha_kms_1       ... done
Creating ozonesecure-ha_s3g_1       ... done
Creating ozonesecure-ha_scm3.org_1  ... done
Creating ozonesecure-ha_om3_1       ... done
Creating ozonesecure-ha_om1_1       ... done
Creating ozonesecure-ha_scm1.org_1  ... done
Creating ozonesecure-ha_datanode3_1 ... done
Creating ozonesecure-ha_recon_1     ... done
Creating ozonesecure-ha_datanode2_1 ... done
Creating ozonesecure-ha_datanode1_1 ... done
Creating ozonesecure-ha_om2_1       ... done
ozone.scm.client.address should be set in ozone-site.xml or with the --scm option
SECONDS: 4

SECONDS: 51
com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm2.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm2,nodeAddress=scm2.org/172.25.0.117:9860 after 1 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm3.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm3,nodeAddress=scm3.org/172.25.0.118:9860 after 2 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm1.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm1,nodeAddress=scm1.org/172.25.0.116:9860 after 3 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm2.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm2,nodeAddress=scm2.org/172.25.0.117:9860 after 4 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm3.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm3,nodeAddress=scm3.org/172.25.0.118:9860 after 5 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm1.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm1,nodeAddress=scm1.org/172.25.0.116:9860 after 6 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm2.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm2,nodeAddress=scm2.org/172.25.0.117:9860 after 7 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm3.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm3,nodeAddress=scm3.org/172.25.0.118:9860 after 8 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: org.apache.hadoop.ipc.RemoteException(org.apache.hadoop.hdds.ratis.ServerNotLeaderException): Server:17440e9e-0b34-4cd8-8102-cb903e52057d is not the leader. Could not determine the leader node. at org.apache.hadoop.hdds.ratis.ServerNotLeaderException.convertToNotLeaderException(ServerNotLeaderException.java:109) at org.apache.hadoop.hdds.scm.ha.RatisUtil.checkRatisException(RatisUtil.java:246) at org.apache.hadoop.hdds.scm.protocol.StorageContainerLocationProtocolServerSideTranslatorPB.submitRequest(StorageContainerLocationProtocolServerSideTranslatorPB.java:193) at org.apache.hadoop.hdds.protocol.proto.StorageContainerLocationProtocolProtos$StorageContainerLocationProtocolService$2.callBlockingMethod(StorageContainerLocationProtocolProtos.java:62732) at org.apache.hadoop.ipc.ProtobufRpcEngine$Server.processCall(ProtobufRpcEngine.java:466) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:574) at org.apache.hadoop.ipc.ProtobufRpcEngine2$Server$ProtoBufRpcInvoker.call(ProtobufRpcEngine2.java:552) at org.apache.hadoop.ipc.RPC$Server.call(RPC.java:1093) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:1035) at org.apache.hadoop.ipc.Server$RpcCall.run(Server.java:963) at java.base/java.security.AccessController.doPrivileged(Native Method) at java.base/javax.security.auth.Subject.doAs(Subject.java:423) at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1878) at org.apache.hadoop.ipc.Server$Handler.run(Server.java:2966) , while invoking $Proxy20.submitRequest over nodeId=scm1,nodeAddress=scm1.org/172.25.0.116:9860 after 9 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm2.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm2,nodeAddress=scm2.org/172.25.0.117:9860 after 10 failover attempts. Trying to failover after sleeping for 2000ms. com.google.protobuf.ServiceException: java.net.ConnectException: Call From scm1.org/172.25.0.116 to scm3.org:9860 failed on connection exception: java.net.ConnectException: Connection refused; For more details see: http://wiki.apache.org/hadoop/ConnectionRefused, while invoking $Proxy20.submitRequest over nodeId=scm3,nodeAddress=scm3.org/172.25.0.118:9860 after 11 failover attempts. Trying to failover after sleeping for 2000ms. SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 66
SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 78
SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 104
SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 148
SCM is in safe mode. validated:false, DataNodeSafeModeRule, registered datanodes (=0) >= required datanodes (=3) validated:false, HealthyPipelineSafeModeRule, healthy Ratis/THREE pipelines (=0) >= healthyPipelineThresholdCount (=1) validated:true, ContainerSafeModeRule, % of containers with at least one reported replica (=1.00) >= safeModeCutoff (=0.99) validated:true, AtleastOneDatanodeReportedRule, reported Ratis/THREE pipelines with at least one datanode (=0) >= threshold (=0)
SECONDS: 182
SCM is out of safe mode.
Safe mode is off
Found OM leader for service id1: om1 : LEADER (om1)
==============================================================================
Kinit :: Kinit test user                                                      
==============================================================================
Kinit                                                                 | PASS |
------------------------------------------------------------------------------
Kinit :: Kinit test user                                              | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org.xml
==============================================================================
Freon                                                                         
==============================================================================
Freon.echoRPCLoad :: Test freon echo RPC commands                             
==============================================================================
Ozone Echo RPC Load Generator with request payload and response pa... | PASS |
------------------------------------------------------------------------------
Ozone Echo RPC Load Generator with request payload and empty respo... | PASS |
------------------------------------------------------------------------------
Ozone Echo RPC Load Generator with empty request payload and respo... | PASS |
------------------------------------------------------------------------------
Ozone Echo RPC Load Generator with empty request payload and empty... | PASS |
------------------------------------------------------------------------------
Freon.echoRPCLoad :: Test freon echo RPC commands                     | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Freon.Generate-Chunk :: Test freon chunk generation commands                  
==============================================================================
DN Chunk Generator                                                    | PASS |
------------------------------------------------------------------------------
Freon.Generate-Chunk :: Test freon chunk generation commands          | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Freon.Generate :: Test freon data generation commands                         
==============================================================================
Ozone Client Key Generator                                            | PASS |
------------------------------------------------------------------------------
OM Key Generator                                                      | PASS |
------------------------------------------------------------------------------
OM Bucket Generator                                                   | PASS |
------------------------------------------------------------------------------
Freon.Generate :: Test freon data generation commands                 | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
Freon.Remove :: Test freon data remove commands                               
==============================================================================
Ozone Client Key Remover                                              | PASS |
------------------------------------------------------------------------------
OM Bucket Remover                                                     | PASS |
------------------------------------------------------------------------------
Freon.Remove :: Test freon data remove commands                       | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
Freon.Validate-Chunk :: Test freon chunk validation commands                  
==============================================================================
DN Chunk Validator                                                    | PASS |
------------------------------------------------------------------------------
Freon.Validate-Chunk :: Test freon chunk validation commands          | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Freon.Validate :: Test freon data validation commands                         
==============================================================================
Ozone Client Key Validator                                            | PASS |
------------------------------------------------------------------------------
Freon.Validate :: Test freon data validation commands                 | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Freon                                                                 | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-1.xml
==============================================================================
Links :: Test bucket links via Ozone CLI                                      
==============================================================================
Link to non-existent bucket                                           | PASS |
------------------------------------------------------------------------------
Key create passthrough                                                | PASS |
------------------------------------------------------------------------------
Key read passthrough                                                  | PASS |
------------------------------------------------------------------------------
Key list passthrough                                                  | PASS |
------------------------------------------------------------------------------
Key delete passthrough                                                | PASS |
------------------------------------------------------------------------------
Bucket list contains links                                            | PASS |
------------------------------------------------------------------------------
Bucket info shows source                                              | PASS |
------------------------------------------------------------------------------
Source and target have separate ACLs                                  | PASS |
------------------------------------------------------------------------------
Buckets and links share namespace                                     | PASS |
------------------------------------------------------------------------------
Can follow link with read access                                      | PASS |
------------------------------------------------------------------------------
Cannot follow link without read access                                | PASS |
------------------------------------------------------------------------------
ACL verified on source bucket                                         | PASS |
------------------------------------------------------------------------------
Loop in link chain is detected                                        | PASS |
------------------------------------------------------------------------------
Multiple links to same bucket are allowed                             | PASS |
------------------------------------------------------------------------------
Source bucket not affected by deleting link                           | PASS |
------------------------------------------------------------------------------
Setting bucket property on link not allowed                           | PASS |
------------------------------------------------------------------------------
Links :: Test bucket links via Ozone CLI                              | PASS |
16 tests, 16 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-2.xml
==============================================================================
S3                                                                            
==============================================================================
S3.Awss3 :: S3 gateway test with aws cli                                      
==============================================================================
File upload and directory list                                        | PASS |
------------------------------------------------------------------------------
File upload with special chars                                        | PASS |
------------------------------------------------------------------------------
S3.Awss3 :: S3 gateway test with aws cli                              | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
S3.Boto3 :: S3 gateway test with Boto3 Client                                 
==============================================================================
Boto3 Client Test                                                     | PASS |
------------------------------------------------------------------------------
S3.Boto3 :: S3 gateway test with Boto3 Client                         | PASS |
1 test, 1 passed, 0 failed
==============================================================================
S3.Bucketcreate :: S3 gateway test with aws cli                               
==============================================================================
Create new bucket                                                     | PASS |
------------------------------------------------------------------------------
Create bucket which already exists                                    | PASS |
------------------------------------------------------------------------------
Create bucket with invalid bucket name                                | PASS |
------------------------------------------------------------------------------
Create new bucket and check no group ACL                              | PASS |
------------------------------------------------------------------------------
S3.Bucketcreate :: S3 gateway test with aws cli                       | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
S3.Bucketdelete :: S3 gateway test with aws cli                               
==============================================================================
Delete existing bucket                                                | PASS |
------------------------------------------------------------------------------
Delete non-existent bucket                                            | PASS |
------------------------------------------------------------------------------
S3.Bucketdelete :: S3 gateway test with aws cli                       | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
S3.Buckethead :: S3 gateway test with aws cli                                 
==============================================================================
Head Bucket                                                           | PASS |
------------------------------------------------------------------------------
Head Bucket not existent                                              | PASS |
------------------------------------------------------------------------------
S3.Buckethead :: S3 gateway test with aws cli                         | PASS |
2 tests, 2 passed, 0 failed
==============================================================================
S3.Bucketlist :: S3 gateway test with aws cli                                 
==============================================================================
List buckets                                                          | PASS |
------------------------------------------------------------------------------
Get bucket info with Ozone Shell to check the owner field             | PASS |
------------------------------------------------------------------------------
List buckets with empty access id                                     | PASS |
------------------------------------------------------------------------------
S3.Bucketlist :: S3 gateway test with aws cli                         | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
S3.MultipartUpload :: S3 gateway test with aws cli                            
==============================================================================
Test Multipart Upload With Adjusted Length                            | PASS |
------------------------------------------------------------------------------
Test Multipart Upload                                                 | PASS |
------------------------------------------------------------------------------
Test Multipart Upload Complete                                        | PASS |
------------------------------------------------------------------------------
Test Multipart Upload Complete Entity too small                       | PASS |
------------------------------------------------------------------------------
Test Multipart Upload Complete Invalid part errors and complete mp... | PASS |
------------------------------------------------------------------------------
Test abort Multipart upload                                           | PASS |
------------------------------------------------------------------------------
Test abort Multipart upload with invalid uploadId                     | PASS |
------------------------------------------------------------------------------
Upload part with Incorrect uploadID                                   | PASS |
------------------------------------------------------------------------------
Test list parts                                                       | PASS |
------------------------------------------------------------------------------
Test Multipart Upload with the simplified aws s3 cp API               | PASS |
------------------------------------------------------------------------------
Test Multipart Upload Put With Copy                                   | PASS |
------------------------------------------------------------------------------
Test Multipart Upload Put With Copy and range                         | PASS |
------------------------------------------------------------------------------
Test Multipart Upload Put With Copy and range with IfModifiedSince    | PASS |
------------------------------------------------------------------------------
Test Multipart Upload list                                            | PASS |
------------------------------------------------------------------------------
S3.MultipartUpload :: S3 gateway test with aws cli                    | PASS |
14 tests, 14 passed, 0 failed
==============================================================================
S3.Objectcopy :: S3 gateway test with aws cli                                 
==============================================================================
Copy Object Happy Scenario                                            | PASS |
------------------------------------------------------------------------------
Copy Object Where Bucket is not available                             | PASS |
------------------------------------------------------------------------------
Copy Object Where both source and dest are same with change to sto... | PASS |
------------------------------------------------------------------------------
Copy Object Where Key not available                                   | PASS |
------------------------------------------------------------------------------
S3.Objectcopy :: S3 gateway test with aws cli                         | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
S3.Objectdelete :: S3 gateway test with aws cli                               
==============================================================================
Delete file with s3api                                                | PASS |
------------------------------------------------------------------------------
Delete file with s3api, file doesn't exist                            | PASS |
------------------------------------------------------------------------------
Delete dir with s3api                                                 | PASS |
------------------------------------------------------------------------------
Delete file with s3api, file doesn't exist, prefix of a real file     | PASS |
------------------------------------------------------------------------------
Delete file with s3api, bucket doesn't exist                          | PASS |
------------------------------------------------------------------------------
S3.Objectdelete :: S3 gateway test with aws cli                       | PASS |
5 tests, 5 passed, 0 failed
==============================================================================
S3.Objecthead :: S3 gateway test with aws cli                                 
==============================================================================
Head existing object                                                  | PASS |
------------------------------------------------------------------------------
Head object in non existing bucket                                    | PASS |
------------------------------------------------------------------------------
Head non existing key                                                 | PASS |
------------------------------------------------------------------------------
S3.Objecthead :: S3 gateway test with aws cli                         | PASS |
3 tests, 3 passed, 0 failed
==============================================================================
S3.Objectmultidelete :: S3 gateway test with aws cli                          
==============================================================================
Delete file with multi delete                                         | PASS |
------------------------------------------------------------------------------
S3.Objectmultidelete :: S3 gateway test with aws cli                  | PASS |
1 test, 1 passed, 0 failed
==============================================================================
S3.Objectputget :: S3 gateway test with aws cli                               
==============================================================================
Put object to s3                                                      | PASS |
------------------------------------------------------------------------------
Get object from s3                                                    | PASS |
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset              | PASS |
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset(start off... | PASS |
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset(end offse... | PASS |
------------------------------------------------------------------------------
Get Partial object from s3 with only start offset                     | PASS |
------------------------------------------------------------------------------
Get Partial object from s3 with both start and endoffset which are... | PASS |
------------------------------------------------------------------------------
Get Partial object from s3 to get last n bytes                        | PASS |
------------------------------------------------------------------------------
Incorrect values for end and start offset                             | PASS |
------------------------------------------------------------------------------
Zero byte file                                                        | PASS |
------------------------------------------------------------------------------
S3.Objectputget :: S3 gateway test with aws cli                       | PASS |
10 tests, 10 passed, 0 failed
==============================================================================
S3.Webui :: S3 gateway web ui test                                            
==============================================================================
S3 Gateway Web UI                                                     | PASS |
------------------------------------------------------------------------------
S3.Webui :: S3 gateway web ui test                                    | PASS |
1 test, 1 passed, 0 failed
==============================================================================
S3                                                                    | PASS |
52 tests, 52 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-3.xml
==============================================================================
Admincli                                                                      
==============================================================================
Admincli.Admin :: Test ozone admin command                                    
==============================================================================
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Admin :: Test ozone admin command                            | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Admincli.Container :: Test ozone admin container command                      
==============================================================================
Create container                                                      | PASS |
------------------------------------------------------------------------------
List containers                                                       | PASS |
------------------------------------------------------------------------------
List containers with explicit host                                    | PASS |
------------------------------------------------------------------------------
List containers with container state                                  | PASS |
------------------------------------------------------------------------------
List containers with replication factor ONE                           | PASS |
------------------------------------------------------------------------------
List containers with replication factor THREE                         | PASS |
------------------------------------------------------------------------------
Container info                                                        | PASS |
------------------------------------------------------------------------------
Verbose container info                                                | PASS |
------------------------------------------------------------------------------
Close container                                                       | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Cannot close container without admin privilege                        | PASS |
------------------------------------------------------------------------------
Cannot create container without admin privilege                       | PASS |
------------------------------------------------------------------------------
Admincli.Container :: Test ozone admin container command              | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Admincli.Datanode :: Test ozone admin datanode command                        
==============================================================================
List datanodes                                                        | PASS |
------------------------------------------------------------------------------
Filter list by UUID                                                   | PASS |
------------------------------------------------------------------------------
Filter list by NodeOperationalState                                   | PASS |
------------------------------------------------------------------------------
Filter list by NodeState                                              | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Datanode :: Test ozone admin datanode command                | PASS |
5 tests, 5 passed, 0 failed
==============================================================================
Admincli.Pipeline :: Test ozone admin pipeline command                        
==============================================================================
Create pipeline                                                       | PASS |
------------------------------------------------------------------------------
List pipelines                                                        | PASS |
------------------------------------------------------------------------------
List pipelines with explicit host                                     | PASS |
------------------------------------------------------------------------------
Deactivate pipeline                                                   | PASS |
------------------------------------------------------------------------------
Activate pipeline                                                     | PASS |
------------------------------------------------------------------------------
Close pipeline                                                        | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Pipeline :: Test ozone admin pipeline command                | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Admincli.Replicationmanager :: Test ozone admin replicationmanager command    
==============================================================================
Check replicationmanager                                              | PASS |
------------------------------------------------------------------------------
Check replicationmanager with explicit host                           | PASS |
------------------------------------------------------------------------------
Stop replicationmanager                                               | PASS |
------------------------------------------------------------------------------
Start replicationmanager                                              | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Replicationmanager :: Test ozone admin replicationmanager... | PASS |
5 tests, 5 passed, 0 failed
==============================================================================
Admincli.Safemode :: Test ozone admin safemode command                        
==============================================================================
Check safemode                                                        | PASS |
------------------------------------------------------------------------------
Check safemode with explicit host                                     | PASS |
------------------------------------------------------------------------------
Wait for safemode exit                                                | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Safemode :: Test ozone admin safemode command                | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Admincli.Scmha :: Smoketest ozone cluster startup                             
==============================================================================
Run scm roles                                                         | PASS |
------------------------------------------------------------------------------
Admincli.Scmha :: Smoketest ozone cluster startup                     | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Admincli                                                              | PASS |
35 tests, 35 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-4.xml
==============================================================================
Admincli                                                                      
==============================================================================
Admincli.Admin :: Test ozone admin command                                    
==============================================================================
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Admin :: Test ozone admin command                            | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Admincli.Container :: Test ozone admin container command                      
==============================================================================
Create container                                                      | PASS |
------------------------------------------------------------------------------
List containers                                                       | PASS |
------------------------------------------------------------------------------
List containers with explicit host                                    | PASS |
------------------------------------------------------------------------------
List containers with container state                                  | PASS |
------------------------------------------------------------------------------
List containers with replication factor ONE                           | PASS |
------------------------------------------------------------------------------
List containers with replication factor THREE                         | PASS |
------------------------------------------------------------------------------
Container info                                                        | PASS |
------------------------------------------------------------------------------
Verbose container info                                                | PASS |
------------------------------------------------------------------------------
Close container                                                       | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Cannot close container without admin privilege                        | PASS |
------------------------------------------------------------------------------
Cannot create container without admin privilege                       | PASS |
------------------------------------------------------------------------------
Admincli.Container :: Test ozone admin container command              | PASS |
12 tests, 12 passed, 0 failed
==============================================================================
Admincli.Datanode :: Test ozone admin datanode command                        
==============================================================================
List datanodes                                                        | PASS |
------------------------------------------------------------------------------
Filter list by UUID                                                   | PASS |
------------------------------------------------------------------------------
Filter list by NodeOperationalState                                   | PASS |
------------------------------------------------------------------------------
Filter list by NodeState                                              | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Datanode :: Test ozone admin datanode command                | PASS |
5 tests, 5 passed, 0 failed
==============================================================================
Admincli.Pipeline :: Test ozone admin pipeline command                        
==============================================================================
Create pipeline                                                       | PASS |
------------------------------------------------------------------------------
List pipelines                                                        | PASS |
------------------------------------------------------------------------------
List pipelines with explicit host                                     | PASS |
------------------------------------------------------------------------------
Deactivate pipeline                                                   | PASS |
------------------------------------------------------------------------------
Activate pipeline                                                     | PASS |
------------------------------------------------------------------------------
Close pipeline                                                        | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Pipeline :: Test ozone admin pipeline command                | PASS |
7 tests, 7 passed, 0 failed
==============================================================================
Admincli.Replicationmanager :: Test ozone admin replicationmanager command    
==============================================================================
Check replicationmanager                                              | PASS |
------------------------------------------------------------------------------
Check replicationmanager with explicit host                           | PASS |
------------------------------------------------------------------------------
Stop replicationmanager                                               | PASS |
------------------------------------------------------------------------------
Start replicationmanager                                              | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Replicationmanager :: Test ozone admin replicationmanager... | PASS |
5 tests, 5 passed, 0 failed
==============================================================================
Admincli.Safemode :: Test ozone admin safemode command                        
==============================================================================
Check safemode                                                        | PASS |
------------------------------------------------------------------------------
Check safemode with explicit host                                     | PASS |
------------------------------------------------------------------------------
Wait for safemode exit                                                | PASS |
------------------------------------------------------------------------------
Incomplete command                                                    | PASS |
------------------------------------------------------------------------------
Admincli.Safemode :: Test ozone admin safemode command                | PASS |
4 tests, 4 passed, 0 failed
==============================================================================
Admincli.Scmha :: Smoketest ozone cluster startup                             
==============================================================================
Run scm roles                                                         | PASS |
------------------------------------------------------------------------------
Admincli.Scmha :: Smoketest ozone cluster startup                     | PASS |
1 test, 1 passed, 0 failed
==============================================================================
Admincli                                                              | PASS |
35 tests, 35 passed, 0 failed
==============================================================================
Output:  /tmp/smoketest/ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-5.xml
Stopping ozonesecure-ha_recon_1     ... 
Stopping ozonesecure-ha_s3g_1       ... 
Stopping ozonesecure-ha_scm1.org_1  ... 
Stopping ozonesecure-ha_kms_1       ... 
Stopping ozonesecure-ha_scm3.org_1  ... 
Stopping ozonesecure-ha_datanode2_1 ... 
Stopping ozonesecure-ha_datanode1_1 ... 
Stopping ozonesecure-ha_datanode3_1 ... 
Stopping ozonesecure-ha_om1_1       ... 
Stopping ozonesecure-ha_kdc_1       ... 
Stopping ozonesecure-ha_om2_1       ... 
Stopping ozonesecure-ha_om3_1       ... 
Stopping ozonesecure-ha_scm2.org_1  ... 
Stopping ozonesecure-ha_kms_1       ... done
Stopping ozonesecure-ha_kdc_1       ... done
Stopping ozonesecure-ha_s3g_1       ... done
Stopping ozonesecure-ha_om2_1       ... done
Stopping ozonesecure-ha_om3_1       ... done
Stopping ozonesecure-ha_om1_1       ... done
Stopping ozonesecure-ha_recon_1     ... done
Stopping ozonesecure-ha_datanode1_1 ... done
Stopping ozonesecure-ha_scm3.org_1  ... done
Stopping ozonesecure-ha_datanode3_1 ... done
Stopping ozonesecure-ha_scm2.org_1  ... done
Stopping ozonesecure-ha_datanode2_1 ... done
Stopping ozonesecure-ha_scm1.org_1  ... done
Removing ozonesecure-ha_recon_1     ... 
Removing ozonesecure-ha_s3g_1       ... 
Removing ozonesecure-ha_scm1.org_1  ... 
Removing ozonesecure-ha_kms_1       ... 
Removing ozonesecure-ha_scm3.org_1  ... 
Removing ozonesecure-ha_datanode2_1 ... 
Removing ozonesecure-ha_datanode1_1 ... 
Removing ozonesecure-ha_datanode3_1 ... 
Removing ozonesecure-ha_om1_1       ... 
Removing ozonesecure-ha_kdc_1       ... 
Removing ozonesecure-ha_om2_1       ... 
Removing ozonesecure-ha_om3_1       ... 
Removing ozonesecure-ha_scm2.org_1  ... 
Removing ozonesecure-ha_kms_1       ... done
Removing ozonesecure-ha_datanode1_1 ... done
Removing ozonesecure-ha_recon_1     ... done
Removing ozonesecure-ha_om1_1       ... done
Removing ozonesecure-ha_scm2.org_1  ... done
Removing ozonesecure-ha_kdc_1       ... done
Removing ozonesecure-ha_s3g_1       ... done
Removing ozonesecure-ha_datanode3_1 ... done
Removing ozonesecure-ha_om3_1       ... done
Removing ozonesecure-ha_scm3.org_1  ... done
Removing ozonesecure-ha_om2_1       ... done
Removing ozonesecure-ha_datanode2_1 ... done
Removing ozonesecure-ha_scm1.org_1  ... done
Removing network ozonesecure-ha_ozone_net
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozonesecure-ha/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/ozonesecure-ha/result/report.html
Output:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha.xml
removed 'ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-1.xml'
removed 'ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-2.xml'
removed 'ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-3.xml'
removed 'ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-4.xml'
removed 'ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org-5.xml'
removed 'ozonesecure-ha/result/robot-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org.xml'
removed 'ozonesecure-ha/result/log.html'
removed 'ozonesecure-ha/result/report.html'
renamed 'ozonesecure-ha/result/dn-audit-004775ef3c0f.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/dn-audit-004775ef3c0f.log'
renamed 'ozonesecure-ha/result/dn-audit-491064f5c800.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/dn-audit-491064f5c800.log'
renamed 'ozonesecure-ha/result/dn-audit-c654f076c8fc.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/dn-audit-c654f076c8fc.log'
renamed 'ozonesecure-ha/result/docker-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/docker-ozonesecure-ha-ozonesecure-ha-kinit-scm1.org.log'
renamed 'ozonesecure-ha/result/kms-audit.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/kms-audit.log'
renamed 'ozonesecure-ha/result/om-audit-om1.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/om-audit-om1.log'
renamed 'ozonesecure-ha/result/om-audit-om2.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/om-audit-om2.log'
renamed 'ozonesecure-ha/result/om-audit-om3.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/om-audit-om3.log'
renamed 'ozonesecure-ha/result/s3g-audit-s3g.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/s3g-audit-s3g.log'
renamed 'ozonesecure-ha/result/scm-audit-scm1.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/scm-audit-scm1.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm2.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/scm-audit-scm2.org.log'
renamed 'ozonesecure-ha/result/scm-audit-scm3.org.log' -> '/home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/ozonesecure-ha/scm-audit-scm3.org.log'
Exception in thread "main" java.net.SocketException: Socket closed
	at java.net.PlainSocketImpl.socketAccept(Native Method)
	at java.net.AbstractPlainSocketImpl.accept(AbstractPlainSocketImpl.java:409)
	at java.net.ServerSocket.implAccept(ServerSocket.java:560)
	at java.net.ServerSocket.accept(ServerSocket.java:528)
	at org.apache.hadoop.test.JacocoServer.main(JacocoServer.java:60)
Log:     /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/log.html
Report:  /home/runner/work/ozone/ozone/hadoop-ozone/dist/target/ozone-1.3.0-SNAPSHOT/compose/result/report.html
